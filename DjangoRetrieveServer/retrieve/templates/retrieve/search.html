<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Retrieve NJNU</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css" rel="stylesheet">
</head>

<body>

{% verbatim %}
<div id="app">
    <div class="row m-5">
        <div class="col-4">
            <svg viewBox="0 0 527.1065144744744 222.2607510144" width="200px">
                <g>
                    <svg viewBox="0 0 344.21501501501496 222.2607510144" height="222.2607510144"
                         width="344.21501501501496">
                        <g>
                            <svg viewBox="0 0 344.21501501501496 222.2607510144" height="222.2607510144"
                                 width="344.21501501501496">
                                <g>
                                    <rect width="344.21501501501496" height="7.7825355071999995" x="0" y="0"
                                          fill="#0e95da" opacity="1" stroke-width="0" stroke="transparent"
                                          fill-opacity="1" class="rect-borderrectangle-0"
                                          data-fill-palette-color="primary" data-stroke-palette-color="transparent"
                                          rx="1%" id="borderrectangle-0" data-palette-color="#0e95da"></rect>
                                </g>
                                <g>
                                    <rect width="344.21501501501496" height="7.7825355071999995" x="0"
                                          y="214.4782155072" fill="#0e95da" opacity="1" stroke-width="0"
                                          stroke="transparent" fill-opacity="1" class="rect-borderrectangle-1"
                                          data-fill-palette-color="primary" data-stroke-palette-color="transparent"
                                          rx="1%" id="borderrectangle-1" data-palette-color="#0e95da"></rect>
                                </g>
                                <g transform="matrix(1,0,0,1,0.8562562562562448,31.130375507199997)">
                                    <svg viewBox="0 0 342.50250250250247 160" height="160" width="342.50250250250247">
                                        <g transform="matrix(1,0,0,1,0,0)">
                                            <svg viewBox="3.86 -38.79 213.85 99.9" width="342.50250250250247"
                                                 height="160" data-palette-color="#0e95da">
                                                <path d="M15.94-12.99L13.5-12.99 13.5 0 3.86 0 3.86-35.69 15.55-35.69Q30.1-35.69 30.1-25.15L30.1-25.15Q30.1-18.95 24.05-15.55L24.05-15.55 34.45 0 23.51 0 15.94-12.99ZM13.5-28.39L13.5-20.24 15.31-20.24Q20.36-20.24 20.36-24.71L20.36-24.71Q20.36-28.39 15.41-28.39L15.41-28.39 13.5-28.39ZM50.49 0.49L50.49 0.49Q43.58 0.49 39.76-3.19 35.94-6.86 35.94-13.65L35.94-13.65Q35.94-20.65 39.48-24.4 43.02-28.15 49.58-28.15L49.58-28.15Q55.83-28.15 59.24-24.89 62.64-21.63 62.64-15.5L62.64-15.5 62.64-11.25 45.58-11.25Q45.68-8.94 47.28-7.62 48.87-6.3 51.63-6.3L51.63-6.3Q54.15-6.3 56.26-6.77 58.37-7.25 60.84-8.4L60.84-8.4 60.84-1.54Q58.59-0.39 56.2 0.05 53.81 0.49 50.49 0.49ZM49.92-21.66L49.92-21.66Q48.24-21.66 47.1-20.59 45.97-19.53 45.77-17.26L45.77-17.26 53.98-17.26Q53.93-19.26 52.84-20.46 51.76-21.66 49.92-21.66ZM81.59-7.06L81.59-7.06Q83.52-7.06 86.2-8.01L86.2-8.01 86.2-1.05Q84.27-0.22 82.53 0.13 80.78 0.49 78.44 0.49L78.44 0.49Q73.63 0.49 71.5-1.87 69.38-4.22 69.38-9.11L69.38-9.11 69.38-20.51 66.04-20.51 66.04-24.39 70.28-27.39 72.75-33.2 79-33.2 79-27.66 85.79-27.66 85.79-20.51 79-20.51 79-9.74Q79-7.06 81.59-7.06ZM107.73-28.15L107.73-28.15Q108.98-28.15 110.1-27.95L110.1-27.95 110.64-27.86 109.78-18.85Q108.61-19.14 106.54-19.14L106.54-19.14Q103.41-19.14 101.99-17.71 100.58-16.28 100.58-13.6L100.58-13.6 100.58 0 91.03 0 91.03-27.66 98.14-27.66 99.63-23.24 100.09-23.24Q101.29-25.44 103.42-26.79 105.56-28.15 107.73-28.15ZM124.09-27.66L124.09 0 114.54 0 114.54-27.66 124.09-27.66ZM114.3-34.55L114.3-34.55Q114.3-36.69 115.49-37.74 116.69-38.79 119.35-38.79L119.35-38.79Q122.01-38.79 123.23-37.72 124.45-36.65 124.45-34.55L124.45-34.55Q124.45-30.35 119.35-30.35L119.35-30.35Q114.3-30.35 114.3-34.55ZM144.1 0.49L144.1 0.49Q137.19 0.49 133.37-3.19 129.55-6.86 129.55-13.65L129.55-13.65Q129.55-20.65 133.09-24.4 136.63-28.15 143.2-28.15L143.2-28.15Q149.45-28.15 152.86-24.89 156.26-21.63 156.26-15.5L156.26-15.5 156.26-11.25 139.2-11.25Q139.29-8.94 140.89-7.62 142.49-6.3 145.25-6.3L145.25-6.3Q147.77-6.3 149.88-6.77 151.99-7.25 154.46-8.4L154.46-8.4 154.46-1.54Q152.21-0.39 149.82 0.05 147.42 0.49 144.1 0.49ZM143.54-21.66L143.54-21.66Q141.86-21.66 140.72-20.59 139.59-19.53 139.39-17.26L139.39-17.26 147.59-17.26Q147.55-19.26 146.46-20.46 145.37-21.66 143.54-21.66ZM178.35 0L168.91 0 158.36-27.66 168.32-27.66 173.01-11.3Q173.03-11.18 173.11-10.89 173.18-10.6 173.25-10.19 173.32-9.79 173.39-9.34 173.45-8.89 173.45-8.5L173.45-8.5 173.62-8.5Q173.62-9.77 174.06-11.25L174.06-11.25 178.96-27.66 188.9-27.66 178.35 0ZM205.55 0.49L205.55 0.49Q198.64 0.49 194.82-3.19 191-6.86 191-13.65L191-13.65Q191-20.65 194.54-24.4 198.08-28.15 204.65-28.15L204.65-28.15Q210.9-28.15 214.3-24.89 217.71-21.63 217.71-15.5L217.71-15.5 217.71-11.25 200.64-11.25Q200.74-8.94 202.34-7.62 203.94-6.3 206.7-6.3L206.7-6.3Q209.21-6.3 211.32-6.77 213.43-7.25 215.9-8.4L215.9-8.4 215.9-1.54Q213.65-0.39 211.26 0.05 208.87 0.49 205.55 0.49ZM204.99-21.66L204.99-21.66Q203.3-21.66 202.17-20.59 201.03-19.53 200.84-17.26L200.84-17.26 209.04-17.26Q208.99-19.26 207.9-20.46 206.82-21.66 204.99-21.66ZM37.84 14.21L37.84 49.9 25.2 49.9 12.16 24.75 11.94 24.75Q12.4 30.69 12.4 33.81L12.4 33.81 12.4 49.9 3.86 49.9 3.86 14.21 16.46 14.21 29.44 39.01 29.59 39.01Q29.25 33.62 29.25 30.34L29.25 30.34 29.25 14.21 37.84 14.21ZM42.75 61.11L42.75 61.11Q40.11 61.11 37.74 60.59L37.74 60.59 37.74 53.1Q38.52 53.24 39.4 53.43 40.28 53.61 41.31 53.61L41.31 53.61Q43.7 53.61 44.72 52.17 45.75 50.73 45.75 47.24L45.75 47.24 45.75 14.21 55.44 14.21 55.44 46.41Q55.44 53.66 52.27 57.38 49.09 61.11 42.75 61.11ZM97.14 14.21L97.14 49.9 84.49 49.9 71.45 24.75 71.24 24.75Q71.7 30.69 71.7 33.81L71.7 33.81 71.7 49.9 63.15 49.9 63.15 14.21 75.75 14.21 88.74 39.01 88.89 39.01Q88.54 33.62 88.54 30.34L88.54 30.34 88.54 14.21 97.14 14.21ZM125.55 14.21L135.2 14.21 135.2 35.69Q135.2 42.7 131.23 46.54 127.26 50.39 119.79 50.39L119.79 50.39Q112.49 50.39 108.57 46.65 104.66 42.92 104.66 35.91L104.66 35.91 104.66 14.21 114.35 14.21 114.35 35.15Q114.35 38.94 115.76 40.65 117.18 42.36 119.94 42.36L119.94 42.36Q122.89 42.36 124.22 40.66 125.55 38.96 125.55 35.11L125.55 35.11 125.55 14.21Z"
                                                      opacity="1" transform="matrix(1,0,0,1,0,0)" fill="#0e95da"
                                                      class="undefined-text-0" data-fill-palette-color="primary"
                                                      data-stroke-palette-color="transparent" id="text-0"></path>
                                            </svg>
                                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xmlns:svgjs="http://svgjs.com/svgjs"></svg>
                                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                 xmlns:svgjs="http://svgjs.com/svgjs"></svg>
                                        </g>
                                    </svg>
                                </g>
                            </svg>
                        </g>
                    </svg>
                </g>
                <g transform="matrix(1,0,0,1,367.562855015015,27.446123940636667)">
                    <svg viewBox="0 0 159.54365945945943 167.36850313312667" height="167.36850313312667"
                         width="159.54365945945943">
                        <g>
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                 version="1.1" x="0" y="0" viewBox="7 3.9040000000000035 87.26316448131368 91.543"
                                 enable-background="new 0 0 100 100" xml:space="preserve" height="167.36850313312667"
                                 width="159.54365945945943" class="icon-icon-0" fill="#0e95fa"
                                 data-fill-palette-color="accent" data-stroke-palette-color="transparent" id="icon-0"><g><g><path fill="#0e95fa" d="M91.473,78.791L75.877,63.193c4.237-6.102,6.728-13.512,6.728-21.49c0-20.844-16.962-37.799-37.805-37.799    C23.956,3.904,7,20.859,7,41.703c0,20.849,16.956,37.803,37.8,37.803c5.744,0,11.189-1.29,16.069-3.593l16.742,16.744    c1.805,1.799,4.214,2.79,6.777,2.79c2.627,0,5.106-1.032,6.979-2.901C95.187,88.725,95.234,82.55,91.473,78.791z M22.119,41.703    c0-12.505,10.176-22.682,22.681-22.682c12.507,0,22.683,10.177,22.683,22.682c0,12.509-10.176,22.685-22.683,22.685    C32.295,64.388,22.119,54.212,22.119,41.703z" data-fill-palette-color="accent" data-stroke-palette-color="transparent"></path></g></g></svg>
                        </g>
                    </svg>
                </g>
            </svg>
        </div>
        <div class="col-6 my-auto">
            <div class="input-group">
                <input type="text" class="form-control" v-model="keyword">
                <button class="btn btn-primary" type="button" v-on:click="redirect">Search</button>
            </div>
        </div>
    </div>
    <div class="m-5 text-center" v-show="secret_love">
        <div class="fs-1 text-danger">Your fat brown wants to marry you !</div>
    </div>
    <div class="m-5 px-5">
        <div v-for="page in pages" class="my-4">
            <div class="fs-3"><a target="_blank" :href="page.URL" v-html="page.title"></a></div>
            <div v-html="page.body"></div>
            <div class="text-muted"><a target="_blank" :href="page.URL" class="text-reset">{{ page.URL }}</a></div>
        </div>
    </div>
</div>
{% endverbatim %}

<script>
    var app = new Vue({
        el: '#app',
        data: {
            keyword: "",
            secret_love: false,
            pages: [
                {#{'title': 'title-1', 'body': 'body-1', 'URL': 'www.1.com'},#}
                {#{'title': 'title-2', 'body': 'body-2', 'URL': 'www.2.com'},#}
                {#{'title': 'title-3', 'body': 'body-3', 'URL': 'www.3.com'},#}
            ],
        },
        created: function () {
            this.keyword = decodeURI(window.location.href.split("?keyword=")[1]);
            this.search(this.keyword);
        },
        mounted() {
            window.addEventListener('keyup', function (event) {
                if (event.keyCode === 13) {
                    console.log("13");
                    app.redirect();
                }
            })
        },
        methods: {
            redirect: function () {
                window.location.href = "/apps/retrieve-njnu/search/?keyword=" + this.keyword;
            },
            search: function () {
                let keyword = this.keyword;
                if (keyword.indexOf("朱爽") >= 0 || keyword.indexOf("兔兔") >= 0) {
                    this.secret_love = true;
                    return;
                }
                axios({
                    method: 'GET',
                    url: '/apps/retrieve-njnu/api_search_by_keyword/?keyword=' + keyword,
                }).then(function (response) {
                    if (response.status === 200) {
                        app.pages = response.data.pages;
                    } else {
                        console.log(response);
                    }
                }).catch(function (response) {
                    console.log(response);
                });
            },
        }
    });
</script>

</body>

</html>